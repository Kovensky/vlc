--- qt4/src/gui/gui.pro.orig	2012-11-23 19:09:53.000000000 +0900
+++ qt4/src/gui/gui.pro	2012-12-23 22:00:24.000000000 +0900
@@ -82,12 +82,12 @@

 contains(QMAKE_MAC_XARCH, no) {
     DEFINES += QT_NO_MAC_XARCH
-} else {
+}
     win32-g++*|!win32:!win32-icc*:!macx-icc* {
         mmx {
             mmx_compiler.commands = $$QMAKE_CXX -c -Winline

-            mac {
+            mac:!contains(QMAKE_MAC_XARCH, no) {
                 mmx_compiler.commands += -Xarch_i386 -mmmx
                 mmx_compiler.commands += -Xarch_x86_64 -mmmx
             } else {
@@ -106,7 +106,7 @@
         3dnow {
             mmx3dnow_compiler.commands = $$QMAKE_CXX -c -Winline

-            mac {
+            mac:!contains(QMAKE_MAC_XARCH, no) {
                 mmx3dnow_compiler.commands += -Xarch_i386 -m3dnow -Xarch_i386 -mmmx
                 mmx3dnow_compiler.commands += -Xarch_x86_64 -m3dnow -Xarch_x86_64 -mmmx
             } else {
@@ -124,7 +124,7 @@
             sse {
                 sse3dnow_compiler.commands = $$QMAKE_CXX -c -Winline

-                mac {
+                mac:!contains(QMAKE_MAC_XARCH, no) {
                     sse3dnow_compiler.commands += -Xarch_i386 -m3dnow -Xarch_i386 -msse
                     sse3dnow_compiler.commands += -Xarch_x86_64 -m3dnow -Xarch_x86_64 -msse
                 } else {
@@ -144,7 +144,7 @@
         sse {
             sse_compiler.commands = $$QMAKE_CXX -c -Winline

-            mac {
+            mac:!contains(QMAKE_MAC_XARCH, no) {
                 sse_compiler.commands += -Xarch_i386 -msse
                 sse_compiler.commands += -Xarch_x86_64 -msse
             } else {
@@ -163,7 +163,7 @@
         sse2 {
             sse2_compiler.commands = $$QMAKE_CXX -c -Winline

-            mac {
+            mac:!contains(QMAKE_MAC_XARCH, no) {
                 sse2_compiler.commands += -Xarch_i386 -msse2
                 sse2_compiler.commands += -Xarch_x86_64 -msse2
             } else {
@@ -182,7 +182,7 @@
         ssse3 {
             ssse3_compiler.commands = $$QMAKE_CXX -c -Winline

-            mac {
+            mac:!contains(QMAKE_MAC_XARCH, no) {
                 ssse3_compiler.commands += -Xarch_i386 -mssse3
                 ssse3_compiler.commands += -Xarch_x86_64 -mssse3
             } else {
@@ -219,4 +219,3 @@
         ssse3: SOURCES += $$SSSE3_SOURCES
         iwmmxt: SOURCES += $$IWMMXT_SOURCES
     }
-}
